<md-toolbar md-scroll-shrink  class="md-primary" style="background-image:url('/assets/header_forest.jpg')" >
  <div class="md-toolbar-tools">
      <img hide-xs height="60%" src='/assets/minibrand.svg' alt='Fri3d Camp' style="margin-right:20px;" />
      <h1>{{ 'SUBMISSION_CAPTION' | translate }}</h1>
      <span flex></span>
      <md-button aria-label="www.fri3d.be">
          www.fri3d.be
      </md-button>
  </div>
</md-toolbar>

<div layout="row">
    <md-content>
    <div layout="row" layout-padding layout-margin layout-align="start center" class="mainwrapper">
        <form layout="column" name="userForm" layout-margin md-block>
            <section layout-padding>

                <div layout-gt-sm="row">
                    <md-radio-group ng-model="vm.lang" ng-change="vm.toggleLanguage()">
                          <md-radio-button value="nl" class="md-primary">Formulier in het Nederlands</md-radio-button>
                          <md-radio-button value="en" class="md-primary">English-language form</md-radio-button>
                    </md-radio-group>
                    <!-- <md-switch flex class="md-primary" ng-change="vm.toggleTranslate()" ng-model="vm.translate" aria-label="Translate form to English">Translate form to English</md-switch> -->
                </div>
                <div layout-gt-sm="row">
                    <p>
                        {{ 'SUBMISSION_DESC' | translate }}
                    </p>
                </div>
            </section>

            <section id="type_section" layout="column">
                <div layout="column" layout-padding>
                    <h2>{{ 'ACTIVITY_TITLE' | translate }}</h2>
                    <p>
                        {{ 'ACTIVITY_DESC' | translate }}
                    </p>
                </div>
                <div layout="row"  layout-padding>
                    <div class="fc-toggle" ng-click="vm.submission.type = 'PRESENTATION'" ng-class="{'selected': vm.submission.type == 'PRESENTATION'}" flex>
                        <h4 class="md-title">{{ 'TYPE_PRESENTATION' | translate }}</h4>
                        <p>{{ 'TYPE_PRESENTATION_DESC' | translate }}</p>
                    </div>
                    <div class="fc-toggle" ng-click="vm.submission.type = 'WORKSHOP'" ng-class="{'selected': vm.submission.type == 'WORKSHOP'}" flex>
                        <h4 class="md-title">{{ 'TYPE_WORKSHOP' | translate }}</h4>
                        <p>{{ 'TYPE_WORKSHOP_DESC' | translate }}</p>
                    </div>
                    <div class="fc-toggle" ng-click="vm.submission.type = 'OTHER'" ng-class="{'selected': vm.submission.type == 'OTHER'}" flex>
                        <h4 class="md-title">{{ 'TYPE_OTHER' | translate }}</h4>
                        <p>{{ 'TYPE_OTHER_DESC' | translate }}</p>
                    </div>
                </div>
                <div layout="row" layout-padding ng-if="!vm.submission.type">
                    <div class="md-accent">
                        <p>Kies één van de bovenstaande soorten content om de rest van het formulier in te vullen</p>
                    </div>
                </div>
            </section>

            <section id="basic_info_section" layout-padding ng-if="vm.submission.type">
                <div layout-gt-sm="row">
                  <md-input-container md-no-float class="md-block" flex-gt-sm>
                      <label class="md-no-float">{{ 'TITLE' | translate }}</label>
                      <input ng-model="vm.submission.title" >
                      <div class="hint">{{ 'TITLE_HINT' | translate }}</div>
                  </md-input-container>
                </div>
                <div layout-gt-sm="row">
                  <md-input-container md-no-float class="md-block" flex-gt-sm>
                      <label class="md-no-float">{{ 'SUMMARY' | translate }}</label>
                      <textarea ng-model="vm.submission.summary" md-maxlength="150" rows="2"></textarea>
                      <div class="hint">{{ 'SUMMARY_HINT' | translate }}</div>
                  </md-input-container>
                </div>
            </section>


            <section id="speaker_section" layout-padding ng-if="vm.submission.type">
                <div layout="row">
                    <p>{{ 'SPEAKER' | translate }}</p>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container md-no-float class="md-block" flex-gt-xs>
                        <label class="md-no-float">{{ 'NAME' | translate }}</label>
                        <input ng-model="vm.submission.speaker_name">
                    </md-input-container>

                    <md-input-container md-no-float class="md-block" flex-gt-xs>
                        <label class="md-no-float">{{ 'EMAIL' | translate }}</label>
                        <input ng-model="vm.submission.speaker_email">
                    </md-input-container>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container md-no-float class="md-block" flex-gt-sm>
                        <label class="md-no-float">Bio</label>
                        <textarea ng-model="vm.submission.speaker_bio" md-maxlength="150" rows="3"></textarea>
                        <div class="hint">{{ 'BIO_HINT' | translate }}</div>
                    </md-input-container>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container md-no-float class="md-block" flex-gt-sm>
                        <label class="md-no-float">{{ 'ASSOCIATED' | translate }}</label>
                        <input ng-model="vm.submission.speaker_associated_hackerspaces">
                        <div class="hint">{{ 'HACKERSPACES_HINT' | translate }}</div>
                    </md-input-container>
                </div>
            </section>

            <section id="availability_section" layout-padding ng-if="vm.submission.type">
                <div layout="row">
                    <p>{{ 'AVAILABILITY' | translate }}</p>
                </div>
                <div layout="column">

                    <div layout="row" layout-align="start center">
                        <span flex class="md-body-1">{{ 'DAY_ONE' | translate }}</span>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'FROM' | translate }}</label>
                            <md-select ng-model="vm.submission.day_1_from">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'UNTIL' | translate }}</label>
                            <md-select ng-model="vm.submission.day_1_until">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                    <div layout="row"  layout-align="start center">
                        <span flex class="md-body-1">{{ 'DAY_TWO' | translate }}</span>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'FROM' | translate }}</label>
                            <md-select ng-model="vm.submission.day_2_from">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'UNTIL' | translate }}</label>
                            <md-select ng-model="vm.submission.day_2_until">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                    <div layout="row" layout-align="start center">
                        <span flex class="md-body-1">{{ 'DAY_THREE' | translate }}</span>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'FROM' | translate }}</label>
                            <md-select ng-model="vm.submission.day_3_from">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <md-input-container md-no-float class="md-block" flex-gt-xs>
                            <label class="md-no-float">{{ 'UNTIL' | translate }}</label>
                            <md-select ng-model="vm.submission.day_3_until">
                                <md-option ng-repeat="tb in vm.timeBuckets" ng-value="tb">
                                    {{ tb }}
                                </md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                </div>

                <div layout="row" ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">

                    <md-switch flex class="md-primary" ng-model="vm.submission.open_for_repetitions" aria-label="Open for repetitions">{{ 'REPETITION_OPTION' | translate }}</md-switch>
                </div>
            </section>


            <section id="target_audience_section" layout-padding ng-if="vm.submission.type">
                <div layout="column">
                    <h2>{{ 'AUDIENCE_TITLE' | translate }}</h2>
                    <p>{{ 'AUDIENCE_DESC' | translate }}</p>
                </div>
                <div layout="row">
                    <md-radio-group ng-model="vm.submission.audience_level" flex-gt-sm >
                        <md-radio-button ng-repeat="level in vm.audienceLevels" ng-value="level">{{ level | translate }}</md-radio-button>
                    </md-radio-group>
                </div>

                <div layout="row">
                    <md-input-container md-no-float class="md-block" flex-gt-xs>
                        <label class="md-no-float">{{ 'AUDIENCE_REQUIREMENTS_LABEL' | translate }}</label>
                        <textarea ng-model="vm.submission.audience_requirements" rows="3"  md-maxlength="150"></textarea>
                        <div class="hint">{{ 'AUDIENCE_REQUIREMENTS_HINT' | translate}}</div>
                    </md-input-container>
                </div>
            </section>

            <section id="location_section" layout-padding ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">
                <div layout="column">
                    <h2>{{ 'LOCATION_TITLE' | translate }}</h2>
                    <p>
                        {{ 'LOCATION_DESC' | translate }}
                    </p>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container md-no-float class="md-block" flex-gt-sm>
                        <label class="md-no-float">{{ 'LOCATION_LABEL' | translate }}</label>
                        <textarea ng-model="vm.submission.location_special_requirements" md-maxlength="150" rows="3"></textarea>
                        <div class="hint">{{ 'LOCATION_HINT' | translate }}</div>
                    </md-input-container>
                </div>
            </section>

            <section id="language_support" layout-padding ng-if="vm.lang === 'en' && vm.submission.type && (vm.submission.type == 'WORKSHOP' || vm.submission.type == 'OTHER')">
                <div layout="column">
                    <h2>{{ 'LANGUAGE_SUPPORT_TITLE' | translate }}</h2>
                    <p>
                        {{ 'LANGUAGE_SUPPORT_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-switch flex="50" class="md-primary" ng-model="vm.submission.dutch_support" aria-label="Need Dutch language support?">{{ 'LANGUAGE_SUPPORT_OPTION' | translate }}</md-switch>
                </div>
            </section>

            <section id="audience_activity_capacity_limit" layout-padding ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">
                <div layout="column">
                    <h2>{{ 'CAPACITY_TITLE' | translate }}</h2>
                    <p>
                        {{ 'CAPACITY_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-input-container md-no-float class="md-block" flex="33">
                        <label class="md-no-float">{{ 'AMOUNT_AUDIENCE' | translate }}</label>
                        <input type="number" ng-model="vm.submission.activity_participant_limit" min="0">
                    </md-input-container>
                </div>
            </section>

            <section id="sessions_section" layout-padding ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">
                <div layout="column">
                    <h2>{{ 'SESSIONS_TITLE' | translate }}</h2>
                    <p>
                        {{ 'SESSIONS_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-input-container md-no-float flex="33">
                        <label class="md-no-float">{{ 'AMOUNT_SESSIONS' | translate }}</label>
                        <input type="number" ng-model="vm.submission.session_count" min="0">
                    </md-input-container>
                </div>
            </section>

            <section id="format_section" layout-padding ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">
                <div layout="column">
                    <h2>{{ 'FORMAT_TITLE' | translate }}</h2>
                    <p>
                        {{ 'FORMAT_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-radio-group ng-model="vm.submission.format">
                        <md-radio-button ng-repeat="type in vm.formatTypes" ng-value="type">{{ type | translate }}</md-radio-button>
                    </md-radio-group>
                </div>
            </section>

            <section id="collaborators_section" layout-padding ng-if="vm.submission.type">
                <div layout="column">
                    <h2>{{ 'COLLABORATORS_TITLE' | translate }}</h2>
                    <p>
                        {{ 'COLLABORATORS_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-whiteframe class="md-whiteframe-1dp" flex>
                    <md-list flex>
                        <md-list-item layout="row" layout-align="start center" flex >
                                <span class="md-body-2" flex>{{ 'NAME' | translate }}</span>
                                <span class="md-body-2" flex>{{ 'EMAIL' | translate }}</span>
                                <md-button class="md-icon-button md-primary" ng-click="vm.showNewCollaboratorDialog($event)">
                                    <md-icon md-font-icon="lnr-plus-circle" class="lnr"></md-icon>
                                </md-button>
                        </md-list-item>
                        <md-list-item layout="column" layout-align="center center" ng-if="!vm.submission.collaborators || vm.submission.collaborators.length < 1" >
                            <md-button class="md-raised md-primary" ng-click="vm.showNewCollaboratorDialog($event)">
                                {{ 'COLLABORATORS_ADD_BUTTON' | translate }}
                            </md-button>
                        </md-list-item>
                        <md-list-item layout="row" layout-align="start center" ng-repeat="collaborator in vm.submission.collaborators" ng-click="vm.editCollaborator($event, collaborator)" flex>
                            <span class="md-body-1" flex>{{ collaborator.name }}</span>
                            <span class="md-body-1" flex>{{ collaborator.email }}</span>
                            <md-button class="md-icon-button md-warn" ng-click="vm.removeCollaborator($event, collaborator)">
                                <md-icon md-font-icon="lnr-trash" class="lnr"></md-icon>
                            </md-button>
                        </md-list-item>
                    </md-list>
                </md-whiteframe>
                </div>
            </section>

            <section id="activity_duration_section" layout-padding ng-if="vm.submission.type">
                <div layout-gt-sm="column">
                    <h2>{{ 'ACTIVITY_DURATION_TITLE' | translate }}</h2>
                    <p>
                        {{ 'ACTIVITY_DURATION_DESC' | translate }}
                    </p>
                </div>
                <div layout-gt-sm="row">
                    <md-input-container flex>
                        <label>{{ 'ACTIVITY_DURATION_LABEL' | translate }}</label>
                        <input flex type="number" ng-model="vm.submission.activity_duration" aria-label="Activity Duration (in minutes)" min="0">
                    </md-input-container>
                </div>
                <div layout-gt-sm="column" ng-if="vm.submission.format && vm.submission.format !== 'FULLTIME'">
                    <p>
                        {{ 'ACTIVITY_DURATION_PER_PARTICIPANT' | translate }}
                    </p>
                </div>
                <div layout-gt-sm="row" ng-if="vm.submission.format && vm.submission.format !== 'FULLTIME'">
                    <md-input-container flex>
                        <label>{{ 'VISIT_DURATION_LABEL' | translate }}</label>
                        <input flex type="number" ng-model="vm.submission.visit_duration" aria-label="Visit Duration (in minutes)" min="0">
                    </md-input-container>
                </div>
            </section>

            <section id="costs" layout-padding ng-if="vm.submission.type && vm.submission.type == 'WORKSHOP'">
                <div layout="column">
                    <h2>{{ 'COSTS_TITLE' | translate }}</h2>
                    <p>
                        {{ 'COSTS_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-input-container md-no-float class="md-block" flex>
                        <label class="md-no-float">{{ 'COSTS_LABEL' | translate }}</label>
                        <input type="number" ng-model="vm.submission.costs" min="0">
                    </md-input-container>
                </div>
            </section>

            <section id="general_remarks" layout-padding ng-if="vm.submission.type">
                <div layout="column">
                    <h2>{{ 'GENERAL_REMARKS_TITLE' | translate }}</h2>
                    <p>
                        {{ 'GENERAL_REMARKS_DESC' | translate }}
                    </p>
                </div>
                <div layout="row">
                    <md-input-container md-no-float class="md-block" flex-gt-xs>
                        <input ng-model="vm.submission.general_remarks">
                        <div class="hint">{{ 'GENERAL_REMARKS_HINT' | translate }}</div>
                    </md-input-container>
                </div>
            </section>

            <section id="controls" layout-padding layout="row" layout-align="end stretch" ng-if="vm.submission.type">
                <div layout="column" layout-align="center center">
                    <md-checkbox class="md-primary" ng-model="vm.ready_to_publish" aria-label="Ready to publish" style="margin: 0;">
                        {{ 'SUBMISSION_COMPLETE_OPTION' | translate }}
                    </md-checkbox>
                </div>
                <span flex></span>
                <div layout="column" layout-align="center center">
                    <md-button ng-click="vm.save()" class="md-raised md-primary">{{ 'SAVE' | translate }}</md-button>
                </div>

            </section>
        </form>
    </div>
    </md-content>

    <md-sidenav
            class="md-sidenav-right"
            md-component-id="right"
            md-is-locked-open="$mdMedia('gt-md')"
            md-whiteframe="4" ng-if="vm.comments && vm.comments.data && vm.comments.data.length > 0">
        <md-content flex>
            <md-list class="md-dense" flex>
                <md-list-item ng-repeat="comment in vm.comments.data" class="md-3-line" >
                    <md-icon md-font-icon="lnr-warning" class="lnr md-avatar"></md-icon>
                    <div class="md-list-item-text" layout="column">
                        <h4>{{comment.data.message}}</h4>
                        <span class="md-caption" am-time-ago="comment.data.timestamp | amParse"></span>
                        <div layout="column">
                            <div layout="row" ng-repeat="delta in comment.data.diff" layout-align="space-between center">
                                <span class="md-caption">{{ delta.path.join(', ') }}</span>
                                <span class="md-caption" ng-if="delta.kind == 'N'"> SET </span>
                                <span class="md-caption" ng-if="delta.kind == 'D'"> DEL </span>
                                <span class="md-caption" ng-if="delta.kind == 'E'"> SET </span>
                                <span class="md-caption" ng-if="delta.kind == 'A'"> ADD </span>
                                <span class="md-caption" flex>{{ delta.rhs | limitTo:100 }}</span>
                            </div>
                        </div>
                    </div>
                    <md-divider></md-divider>
                </md-list-item>
            </md-list>
        </md-content>
        <md-divider></md-divider>
        <div layout="row" layout-align="start stretch" layout-padding>
            <md-input-container md-no-float flex>
                <label class="md-no-float">{{ 'MESSAGE' | translate }}</label>
                <textarea ng-model="vm.comment" rows="3"></textarea>
            </md-input-container>
            <md-button>Send</md-button>
        </div>
    </md-sidenav>
</div>
